<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org" xmlns:sec="http://www.w3.org/1999/xhtml">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin Dashboard</title>

    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- Bootstrap Icons -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css" rel="stylesheet">

    <style>
        body {
          background: linear-gradient(135deg, #eef2ff, #e0f2fe);
          min-height: 100vh;
          display: flex;
        }

        /* Sidebar */
        .sidebar {
          height: 100vh;
          width: 240px;
          background-color: #1f2937;
          position: fixed;
          top: 0;
          left: 0;
          padding-top: 60px;
        }
        .sidebar a {
          color: #9ca3af;
          padding: 15px 20px;
          display: flex;
          align-items: center;
          gap: 10px;
          text-decoration: none;
          transition: 0.3s;
        }
        .sidebar a:hover {
          background-color: #374151;
          color: #fff;
        }

        /* Content */
        .content {
          margin-left: 240px;
          padding: 20px;
          width: 100%;
        }

        /* Header */
        .navbar {
          background: linear-gradient(90deg, #2563eb, #4f46e5);
          box-shadow: 0 4px 15px rgba(0,0,0,0.2);
          border-radius: 10px;
        }

        /* Cards with Double Gradient */
        .dashboard-card {
          min-height: 200px;
          border-radius: 18px;
          color: black;
          text-align: center;
          display: flex;
          flex-direction: column;
          justify-content: center;
          align-items: center;
          text-decoration: none;
          position: relative;
          overflow: hidden;
          padding: 18px;
          transition: transform 0.3s ease, box-shadow 0.3s ease;
        }

        /* Gradient Border Effect */
        .dashboard-card::before {
          content: "";
          position: absolute;
          inset: -3px;
          border-radius: 20px;
          background: linear-gradient(135deg, #60a5fa, #a78bfa, #f472b6);
          z-index: -1;
          filter: blur(8px);
          opacity: 0.55;
          transition: opacity 0.3s ease, filter 0.3s ease;
        }

        .dashboard-card:hover {
          transform: translateY(-6px) scale(1.03);
          box-shadow: 0 0 18px rgba(0,0,0,0.25);
        }
        .dashboard-card:hover::before {
          opacity: 1;
          filter: blur(2px);
        }

        /* Logout button */
        .btn-gradient {
            background: linear-gradient(90deg, #ef4444, #dc2626);
            color: white;
            border: none;
            transition: 0.3s;
        }
        .btn-gradient:hover {
            background: linear-gradient(90deg, #ec4899, #db2777);
            color: white;
        }

        /* Smooth Inner Gradients */
        .gradient-blue {
          background: linear-gradient(135deg, #3b82f6, #60a5fa);
        }
        .gradient-soft-pink {
          background: linear-gradient(135deg, #ec4899, #f472b6);
        }
        .gradient-soft-indigo {
          background: linear-gradient(135deg, #6366f1, #a78bfa);
        }

        /* Icons */
        .dashboard-icon {
          font-size: 2.6rem;
          margin-bottom: 8px;
        }
    </style>
</head>
<body>

<!-- Sidebar -->
<div class="sidebar">
    <a href="/admin/dashboard">
        <i class="bi bi-house-fill fs-5"></i>
        <span>Dashboard</span>
    </a>
    <a href="/admin/students"><i class="bi bi-people-fill"></i> Student List</a>
    <a href="/admin/keycloak-users"><i class="bi bi-people-fill"></i> KeycloakUser List</a>

    <a href="/students/new"><i class="bi bi-person-plus-fill"></i> Add Student</a>
    <!-- ✅ Fixed link -->
    <a href="/admin/keycloak-users/new"><i class="bi bi-shield-lock-fill"></i> Create User</a>
    <a href="/logout"><i class="bi bi-box-arrow-right"></i> Logout</a>
</div>

<!-- Page Content -->
<div class="content">
    <!-- Header -->
    <h1 class="mb-4">
        <span sec:authorize="hasAuthority('ROLE_admin')">Welcome Admin</span>
        <span sec:authorize="hasAuthority('ROLE_manager')">Welcome Manager</span>
        <span sec:authorize="hasAuthority('ROLE_jrmanager')">Welcome JrManager</span>
        - <span sec:authentication="name"></span>
    </h1>
    <nav class="navbar navbar-expand-lg navbar-dark mb-4">
        <div class="container-fluid">
            <a class="navbar-brand fw-bold" href="#">✨ Admin Dashboard</a>
            <div class="collapse navbar-collapse">
                <ul class="navbar-nav ms-auto align-items-center">
                    <li class="nav-item">
                        <a class="btn btn-gradient d-flex align-items-center gap-2" th:href="@{/logout}">
                            <i class="bi bi-box-arrow-right"></i> Logout
                        </a>
                    </li>
                </ul>
            </div>
        </div>
    </nav>

    <!-- Cards Section -->
    <div class="container">
        <div class="row g-4 justify-content-center">

            <!-- Card: Add Student -->
            <div class="col-md-4">
                <a href="/students/new" class="card dashboard-card gradient-blue">
                    <i class="bi bi-person-plus-fill dashboard-icon"></i>
                    <h5 class="fw-bold">Add Student</h5>
                    <p>Register a new student</p>
                </a>
            </div>

            <!-- Card: Create Keycloak User -->
            <div class="col-md-4">
                <a href="/admin/keycloak-users/new" class="card dashboard-card gradient-soft-pink">
                    <i class="bi bi-shield-lock-fill dashboard-icon"></i>
                    <h5 class="fw-bold">Create User</h5>
                    <p>Add a Keycloak user</p>
                </a>
            </div>

            <!-- Card: Student Stats -->
            <div class="col-md-4">
                <a href="/admin/students" class="card dashboard-card gradient-soft-indigo">
                    <i class="bi bi-bar-chart-fill dashboard-icon"></i>
                    <h5 class="fw-bold">Students</h5>
                    <p>Student Details</p>
                </a>
            </div>

            <!-- Card: Keycloak Users -->
            <div class="col-md-4">
                <a href="/admin/keycloak-users" class="card dashboard-card gradient-blue">
                    <i class="bi bi-shield-lock-fill dashboard-icon"></i>
                    <h5 class="fw-bold">Keycloak Users</h5>
                    <p>Manage users and roles</p>
                </a>
            </div>

        </div>
    </div>
</div>

<!-- Bootstrap JS -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
